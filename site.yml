---

- hosts: all
  remote_user: root

  tasks: 

    - name: Upgrade Debian
      apt: 
        update_cache: yes
        upgrade: "yes"

    - name: Install extra
      apt:
        name: 
          - curl
          - apt-transport-https
          - dirmngr
          - aptitude
        state: present

    - name: Add PostgreSQL Repo Key
      apt_key: 
        id: 7FCC7D46ACCC4CF8
        keyserver: keyserver.ubuntu.com

    - name: Add Citrus Repo Key
      apt_key: 
        id: 0D750985D6AF6C22
        url: https://repos.citusdata.com/community/gpgkey

    - name: Add Postgresql Repository
      apt_repository:
        repo: deb http://apt.postgresql.org/pub/repos/apt/ stretch-pgdg main
        state: present

    - name: Add Citrus Repository
      apt_repository: 
        repo: deb https://repos.citusdata.com/community/debian/ stretch main
        state: present

    - name: Install citrus
      apt:
        name: 
          - postgresql-12-citus-9.2
        state: present

# vim: ts=2 et nowrap autoindent
